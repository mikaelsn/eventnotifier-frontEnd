<h1>Event listing</h1>

<div ng-if="events" class="row marketing events">
  <div ng-controller="EventCtrl"><button type="button" ng-disabled="dataLoading" ng-click="email()" class="btn btn-primary">Send notifications</button></div>
  <img ng-if="dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
  <div class="panel panel-default" ng-repeat="event in events">
    <div class="panel-heading">{{ event.name }}</div>
    <div class="panel-body">
      <em>{{ event.description }}</em>
      <dl>
        <dt>Date due</dt>
        <dd> {{ event.date | date:"dd.MM.yyyy"}}</dd>
        <dt>Notify at
          <dd> {{ event.notifyDate | date:"dd.MM.yyyy"}}</dd>
          <table ng-if="event.eventItems" class="table">
            <thead>
              <tr>
                <th>Subtask</th>
                <th>Description</th>
                <th>Date due</th>
                <th>Notify at</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="eventItem in event.eventItems">
                <td>{{ eventItem.name }}</td>
                <td>{{ eventItem.description }}</td>
                <td>{{ eventItem.date | date:"dd.MM.yyyy"}}</td>
                <td>{{ eventItem.notifyDate | date:"dd.MM.yyyy"}}</td>
            </tbody>
          </table>
      </dl>
    </div>
  </div>
</div>

<div ng-if="!events" class="row marketing empty">
  <div class="alert alert-danger" role="alert">
    No events found
  </div>
</div>